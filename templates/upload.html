<form id="uploadForm" enctype="multipart/form-data">
  <input type="file" id="file" required>
  <button type="submit" class="btn-upload">Upload</button>
</form>

<script type="module">
import { API_BASE } from "/static/js/api.js";

document.getElementById("uploadForm").addEventListener("submit", async(e)=>{
 e.preventDefault();

 const token = localStorage.getItem("token");
 const file = document.getElementById("file").files[0];

 const form = new FormData();
 form.append("file", file);

 const res = await fetch(`${API_BASE}/files/upload/`,{
    method:"POST",
    headers:{ "Authorization":`Bearer ${token}` },
    body:form
 });

 if(res.ok){
   alert("✅ File Uploaded");
   location.href="/myfiles";
 } else {
   alert("❌ Upload Failed");
 }
});
</script>