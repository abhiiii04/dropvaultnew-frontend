<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DropVault</title>
  <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>

  <div class="topbar">

  <!-- SEARCH -->
  <div class="topbar-search">
    <span class="search-icon">ğŸ”</span>
    <input type="text" placeholder="Search your files..." />
  </div>

  <!-- RIGHT ACTIONS -->
  <div class="topbar-actions">

    <!-- NOTIFICATIONS -->
    <div class="notif-wrapper">
      <button class="notif-btn">
        ğŸ””
        <span class="notif-dot"></span>
      </button>
    </div>

    <!-- PROFILE -->
    <div class="profile-wrapper">
      <button class="profile-btn" onclick="toggleProfileMenu()">
        <div class="avatar">ğŸ‘¤</div>
        <div class="profile-info">
          <strong id="username">John Doe</strong>
          <span>Pro Plan</span>
        </div>
      </button>

      <!-- DROPDOWN -->
      <div class="profile-menu" id="profileMenu">
        <button onclick="goProfile()">ğŸ‘¤ My Profile</button>
        <button onclick="goSettings()">âš™ Settings</button>
        <button onclick="logout()">ğŸšª Logout</button>
      </div>
    </div>

  </div>
</div>


  <!-- Sidebar -->
  <div class="sidebar">
    <h2>DropVault</h2>
    <nav>
      <a href="/dashboard">Dashboard</a>
      <a href="/upload">Upload</a>
      <a href="/myfiles">My Files</a>
      <a href="/shared">Shared Files</a>
      <a href="/trash">Trash</a>
      <a href="/settings">Settings</a>
      <a href="#" id="logoutBtn">Logout</a>
    </nav>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    {% block content %}{% endblock %}
  </div>

  <!-- Chatbot + Scripts (unchanged) -->
  <script src="/static/js/main.js"></script>

  <script type="module">
    //  Backend API base URL
    export const API_BASE = "https://dropvault-2.onrender.com";

    // ğŸšª Logout
    document.getElementById("logoutBtn").addEventListener("click", () => {
      localStorage.removeItem("token");
      window.location.href = "/login";
    });
  </script>

<script>
function toggleProfileMenu() {
  const menu = document.getElementById("profileMenu");
  menu.style.display = menu.style.display === "block" ? "none" : "block";
}

document.addEventListener("click", e => {
  if (!e.target.closest(".profile-wrapper")) {
    const menu = document.getElementById("profileMenu");
    if (menu) menu.style.display = "none";
  }
});

function goProfile() {
  window.location.href = "/profile";
}

function goSettings() {
  window.location.href = "/settings";
}

function logout() {
  localStorage.clear();
  window.location.href = "/login";
}
</script>


</body>
</html>
